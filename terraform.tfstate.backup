{
  "version": 4,
  "terraform_version": "1.3.6",
  "serial": 15,
  "lineage": "88cff255-ddfc-254b-8c9f-d39fcf1f45ca",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "azurerm_key_vault",
      "name": "key_vault_id",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_policy": [
              {
                "application_id": "",
                "certificate_permissions": [
                  "Backup",
                  "Create",
                  "Delete",
                  "DeleteIssuers",
                  "Get",
                  "GetIssuers",
                  "Import",
                  "List",
                  "ListIssuers",
                  "ManageContacts",
                  "ManageIssuers",
                  "Purge",
                  "Recover",
                  "Restore",
                  "SetIssuers",
                  "Update"
                ],
                "key_permissions": [
                  "Backup",
                  "Create",
                  "Decrypt",
                  "Delete",
                  "Encrypt",
                  "Get",
                  "Import",
                  "List",
                  "Purge",
                  "Recover",
                  "Restore",
                  "Sign",
                  "UnwrapKey",
                  "Update",
                  "Verify",
                  "WrapKey"
                ],
                "object_id": "b5d8e39c-339b-401d-bbc3-95ac48c253bd",
                "secret_permissions": [
                  "Delete",
                  "Get",
                  "List",
                  "Purge",
                  "Set",
                  "Recover"
                ],
                "storage_permissions": [],
                "tenant_id": "6c637512-c417-4e78-9d62-b61258e4b619"
              },
              {
                "application_id": "",
                "certificate_permissions": [],
                "key_permissions": [],
                "object_id": "4d58040b-6b2a-4709-ad82-9a3c2c41b11a",
                "secret_permissions": [
                  "Get"
                ],
                "storage_permissions": [],
                "tenant_id": "6c637512-c417-4e78-9d62-b61258e4b619"
              },
              {
                "application_id": "",
                "certificate_permissions": [],
                "key_permissions": [
                  "Get",
                  "UnwrapKey",
                  "WrapKey"
                ],
                "object_id": "1cd03c9d-10cc-46a0-8735-cbff836c66af",
                "secret_permissions": [
                  "Get"
                ],
                "storage_permissions": [],
                "tenant_id": "6c637512-c417-4e78-9d62-b61258e4b619"
              }
            ],
            "enable_rbac_authorization": false,
            "enabled_for_deployment": false,
            "enabled_for_disk_encryption": false,
            "enabled_for_template_deployment": false,
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.KeyVault/vaults/dev-vault-9d01d0ac1684b3",
            "location": "eastus",
            "name": "dev-vault-9d01d0ac1684b3",
            "network_acls": [],
            "public_network_access_enabled": true,
            "purge_protection_enabled": false,
            "resource_group_name": "dev-vault",
            "sku_name": "standard",
            "tags": {},
            "tenant_id": "6c637512-c417-4e78-9d62-b61258e4b619",
            "timeouts": null,
            "vault_uri": "https://dev-vault-9d01d0ac1684b3.vault.azure.net/"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "azurerm_subnet",
      "name": "lb-subnet-id",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address_prefix": "10.0.2.0/24",
            "address_prefixes": [
              "10.0.2.0/24"
            ],
            "enforce_private_link_endpoint_network_policies": false,
            "enforce_private_link_service_network_policies": false,
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/virtualNetworks/dev-vault/subnets/dev-vault-lb",
            "name": "dev-vault-lb",
            "network_security_group_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/networkSecurityGroups/dev-vault-lb",
            "private_endpoint_network_policies_enabled": true,
            "private_link_service_network_policies_enabled": true,
            "resource_group_name": "dev-vault",
            "route_table_id": "",
            "service_endpoints": [
              "Microsoft.KeyVault"
            ],
            "timeouts": null,
            "virtual_network_name": "dev-vault"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "azurerm_subnet",
      "name": "vm-subnet-id",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address_prefix": "10.0.1.0/24",
            "address_prefixes": [
              "10.0.1.0/24"
            ],
            "enforce_private_link_endpoint_network_policies": false,
            "enforce_private_link_service_network_policies": false,
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/virtualNetworks/dev-vault/subnets/dev-vault",
            "name": "dev-vault",
            "network_security_group_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/networkSecurityGroups/dev-vault",
            "private_endpoint_network_policies_enabled": true,
            "private_link_service_network_policies_enabled": true,
            "resource_group_name": "dev-vault",
            "route_table_id": "",
            "service_endpoints": [
              "Microsoft.KeyVault"
            ],
            "timeouts": null,
            "virtual_network_name": "dev-vault"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.vault-ent",
      "mode": "data",
      "type": "azurerm_client_config",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "client_id": "04b07795-8ddb-461a-bbee-02f9e1bf7b46",
            "id": "Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9YjVkOGUzOWMtMzM5Yi00MDFkLWJiYzMtOTVhYzQ4YzI1M2JkO3N1YnNjcmlwdGlvbklkPWYyMzRjMmQ1LTRhNjYtNDEzZi04OWM3LWFkMGZkZTExZDg2NDt0ZW5hbnRJZD02YzYzNzUxMi1jNDE3LTRlNzgtOWQ2Mi1iNjEyNThlNGI2MTk=",
            "object_id": "b5d8e39c-339b-401d-bbc3-95ac48c253bd",
            "subscription_id": "f234c2d5-4a66-413f-89c7-ad0fde11d864",
            "tenant_id": "6c637512-c417-4e78-9d62-b61258e4b619",
            "timeouts": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.vault-ent.module.iam",
      "mode": "data",
      "type": "azurerm_subscription",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "display_name": "DI Cloud and DevOps Sandbox - Southeast",
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864",
            "location_placement_id": "Public_2014-09-01",
            "quota_id": "MSDNDevTest_2014-09-01",
            "spending_limit": "Off",
            "state": "Enabled",
            "subscription_id": "f234c2d5-4a66-413f-89c7-ad0fde11d864",
            "tags": {},
            "tenant_id": "6c637512-c417-4e78-9d62-b61258e4b619",
            "timeouts": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.vault-ent.module.iam",
      "mode": "managed",
      "type": "azurerm_key_vault_access_policy",
      "name": "load_balancer_msi",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "application_id": "",
            "certificate_permissions": [],
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.KeyVault/vaults/dev-vault-9d01d0ac1684b3/objectId/4d58040b-6b2a-4709-ad82-9a3c2c41b11a",
            "key_permissions": [],
            "key_vault_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.KeyVault/vaults/dev-vault-9d01d0ac1684b3",
            "object_id": "4d58040b-6b2a-4709-ad82-9a3c2c41b11a",
            "secret_permissions": [
              "Get"
            ],
            "storage_permissions": [],
            "tenant_id": "6c637512-c417-4e78-9d62-b61258e4b619",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "data.azurerm_key_vault.key_vault_id",
            "module.vault-ent.data.azurerm_client_config.current",
            "module.vault-ent.module.iam.azurerm_user_assigned_identity.load_balancer"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.vault-ent.module.iam",
      "mode": "managed",
      "type": "azurerm_key_vault_access_policy",
      "name": "vault_msi",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "application_id": "",
            "certificate_permissions": [],
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.KeyVault/vaults/dev-vault-9d01d0ac1684b3/objectId/1cd03c9d-10cc-46a0-8735-cbff836c66af",
            "key_permissions": [
              "Get",
              "UnwrapKey",
              "WrapKey"
            ],
            "key_vault_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.KeyVault/vaults/dev-vault-9d01d0ac1684b3",
            "object_id": "1cd03c9d-10cc-46a0-8735-cbff836c66af",
            "secret_permissions": [
              "Get"
            ],
            "storage_permissions": [],
            "tenant_id": "6c637512-c417-4e78-9d62-b61258e4b619",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "data.azurerm_key_vault.key_vault_id",
            "module.vault-ent.data.azurerm_client_config.current",
            "module.vault-ent.module.iam.azurerm_user_assigned_identity.vault"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.vault-ent.module.iam",
      "mode": "managed",
      "type": "azurerm_role_assignment",
      "name": "vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "condition": "",
            "condition_version": "",
            "delegated_managed_identity_resource_id": "",
            "description": "",
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Authorization/roleAssignments/024fcb4f-953e-b9b2-6879-a5ea7ca09005",
            "name": "024fcb4f-953e-b9b2-6879-a5ea7ca09005",
            "principal_id": "1cd03c9d-10cc-46a0-8735-cbff836c66af",
            "principal_type": "ServicePrincipal",
            "role_definition_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/providers/Microsoft.Authorization/roleDefinitions/955b10f6-acb2-b883-239b-c45cea43afdf",
            "role_definition_name": "dev1-vault-server",
            "scope": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault",
            "skip_service_principal_aad_check": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.vault-ent.module.iam.azurerm_role_definition.vault",
            "module.vault-ent.module.iam.azurerm_user_assigned_identity.vault",
            "module.vault-ent.module.iam.data.azurerm_subscription.current"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.vault-ent.module.iam",
      "mode": "managed",
      "type": "azurerm_role_definition",
      "name": "vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "assignable_scopes": [
              "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault"
            ],
            "description": "",
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/providers/Microsoft.Authorization/roleDefinitions/955b10f6-acb2-b883-239b-c45cea43afdf|/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault",
            "name": "dev1-vault-server",
            "permissions": [
              {
                "actions": [
                  "Microsoft.Compute/virtualMachineScaleSets/*/read"
                ],
                "data_actions": [],
                "not_actions": [],
                "not_data_actions": []
              }
            ],
            "role_definition_id": "955b10f6-acb2-b883-239b-c45cea43afdf",
            "role_definition_resource_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/providers/Microsoft.Authorization/roleDefinitions/955b10f6-acb2-b883-239b-c45cea43afdf",
            "scope": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vault-ent.module.iam.data.azurerm_subscription.current"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.vault-ent.module.iam",
      "mode": "managed",
      "type": "azurerm_user_assigned_identity",
      "name": "load_balancer",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "client_id": "53a04f4c-ebbc-4059-985e-b84ea652649e",
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.ManagedIdentity/userAssignedIdentities/dev1-vault-lb",
            "location": "eastus",
            "name": "dev1-vault-lb",
            "principal_id": "4d58040b-6b2a-4709-ad82-9a3c2c41b11a",
            "resource_group_name": "dev-vault",
            "tags": {},
            "tenant_id": "6c637512-c417-4e78-9d62-b61258e4b619",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.vault-ent.module.iam",
      "mode": "managed",
      "type": "azurerm_user_assigned_identity",
      "name": "vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "client_id": "b1f4d65f-fcf6-4853-861a-fac19d915e51",
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.ManagedIdentity/userAssignedIdentities/dev1-vault",
            "location": "eastus",
            "name": "dev1-vault",
            "principal_id": "1cd03c9d-10cc-46a0-8735-cbff836c66af",
            "resource_group_name": "dev-vault",
            "tags": {},
            "tenant_id": "6c637512-c417-4e78-9d62-b61258e4b619",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.vault-ent.module.kms",
      "mode": "managed",
      "type": "azurerm_key_vault_key",
      "name": "vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "curve": "",
            "e": "AQAB",
            "expiration_date": null,
            "id": "https://dev-vault-9d01d0ac1684b3.vault.azure.net/keys/dev1-vault-key/ca87cca520554f1b8b686bf6608c6da5",
            "key_opts": [
              "unwrapKey",
              "wrapKey"
            ],
            "key_size": 2048,
            "key_type": "RSA",
            "key_vault_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.KeyVault/vaults/dev-vault-9d01d0ac1684b3",
            "n": "vCPFtyttvE5Um2jGWyMqb1BaJZPoHGeBky8VEYr9kXFfwOkD97GAa3K6v7OOuvrF5BWZZYqcBB31pZboiKIRGDrtOjNJQWiYrynpyc_FEuSpogJs3NLZlQtPicx1H8hgYaP2_J9GjMz14fy5hsFxdCkB6Nb0Dwjk2iCbHifY5arxHb6uVRG07_xK5hoNkrfgXBFDoe15CK3Gj0ySoAU550ITT1dYLRIb7fz5JURZSacIt-f6U9meqI29UhM3RacMiiS99VgPXeoZB3u_VL4JVPgefkrpcaeCl3hit80Au6XWjkM7BTtAc5W15znv9XM_o9o0tDE8r0DNlL7ZfbwL7Q",
            "name": "dev1-vault-key",
            "not_before_date": null,
            "public_key_openssh": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC8I8W3K228TlSbaMZbIypvUFolk+gcZ4GTLxURiv2RcV/A6QP3sYBrcrq/s466+sXkFZllipwEHfWlluiIohEYOu06M0lBaJivKenJz8US5KmiAmzc0tmVC0+JzHUfyGBho/b8n0aMzPXh/LmGwXF0KQHo1vQPCOTaIJseJ9jlqvEdvq5VEbTv/ErmGg2St+BcEUOh7XkIrcaPTJKgBTnnQhNPV1gtEhvt/PklRFlJpwi35/pT2Z6ojb1SEzdFpwyKJL31WA9d6hkHe79UvglU+B5+Sulxp4KXeGK3zQC7pdaOQzsFO0BzlbXnOe/1cz+j2jS0MTyvQM2Uvtl9vAvt\n",
            "public_key_pem": "-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvCPFtyttvE5Um2jGWyMq\nb1BaJZPoHGeBky8VEYr9kXFfwOkD97GAa3K6v7OOuvrF5BWZZYqcBB31pZboiKIR\nGDrtOjNJQWiYrynpyc/FEuSpogJs3NLZlQtPicx1H8hgYaP2/J9GjMz14fy5hsFx\ndCkB6Nb0Dwjk2iCbHifY5arxHb6uVRG07/xK5hoNkrfgXBFDoe15CK3Gj0ySoAU5\n50ITT1dYLRIb7fz5JURZSacIt+f6U9meqI29UhM3RacMiiS99VgPXeoZB3u/VL4J\nVPgefkrpcaeCl3hit80Au6XWjkM7BTtAc5W15znv9XM/o9o0tDE8r0DNlL7ZfbwL\n7QIDAQAB\n-----END PUBLIC KEY-----\n",
            "resource_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.KeyVault/vaults/dev-vault-9d01d0ac1684b3/keys/dev1-vault-key/versions/ca87cca520554f1b8b686bf6608c6da5",
            "resource_versionless_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.KeyVault/vaults/dev-vault-9d01d0ac1684b3/keys/dev1-vault-key",
            "tags": {},
            "timeouts": null,
            "version": "ca87cca520554f1b8b686bf6608c6da5",
            "versionless_id": "https://dev-vault-9d01d0ac1684b3.vault.azure.net/keys/dev1-vault-key",
            "x": "",
            "y": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "data.azurerm_key_vault.key_vault_id"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.vault-ent.module.license_storage",
      "mode": "managed",
      "type": "azurerm_key_vault_secret",
      "name": "vault_license",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content_type": "",
            "expiration_date": null,
            "id": "https://dev-vault-9d01d0ac1684b3.vault.azure.net/secrets/dev1-vault-license/ff1c092b5b754ea38a7da7995fa0aa7e",
            "key_vault_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.KeyVault/vaults/dev-vault-9d01d0ac1684b3",
            "name": "dev1-vault-license",
            "not_before_date": null,
            "resource_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.KeyVault/vaults/dev-vault-9d01d0ac1684b3/secrets/dev1-vault-license/versions/ff1c092b5b754ea38a7da7995fa0aa7e",
            "resource_versionless_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.KeyVault/vaults/dev-vault-9d01d0ac1684b3/secrets/dev1-vault-license",
            "tags": {},
            "timeouts": null,
            "value": "MDJNVjRVVTQzQks1SEdZWVRPSlpXRlFNVE1OTkVXVTMzSkpWQ0ZLTTIySTVHWFVXSlNLRjJGVVJDV05WTVdTTUJSSlpMVVUyU01LUldHVVdTRUpWMkUyMlRJTk5OR1VRVEpKVktGSzZDT05WSVRLU0xKTzVVVlNNMldQSlNFT09MVUxKTUVVWlRCSzVJV1NUM0pKRVlVNFJESFBGTVZPVEpSTEY0VEMyMk5JUkRHWVRDVUtFWUU0NlRMT1JISFVSSlVKVjRUQU5DTk5WS1hRV0wySlYzVTQzS1dOTkdWT1NMSkpSQlVVNERDTlpIREFXS1hQQlpWU1dDU09CUkRFTkxHTUZMVkMyS1BORkVYQ1NMSk81VVdDV0NPUEpTRk9WVEdNUkRXWTVDMktORVRNU0xLSkYzVTIyU0pPUkdVSTIzVUpWVkdJVktOS1JSVE1UTEtOTTNFMjJTUk9WR1dVV0pVSlpLR0c2S05OSkRHQ1NMSk81VVdHTTJTTkJSVzRVVEdNUkRXWTVDMktORVRNU0xLSkYzVTIyU0pPUkdVSTIzVUpWVkdJVktOSVJBVE1US0VJRTNFMlJDQ01GRVdTNTNKTEpNR1E1M0JMQkZHUVpDSE5SM0dFM0JaR0JRVk9NTE1KRlZHNjJLTk5KQVhTVExaR0IzVTZVWlFQRkhEQ1VMWkpWNUc2TUtQS1JYVENUMlRHUTJVNlZETU1GRVdTNTNKTVJEVk02TENLNVdIS1dLWUtKWUdFTVJWTVpTRU8zRFVMSkpVU05TSk5KRVhPVExLSlYyRTJSRExPUkdXVVpDVkpWVkUyTlNPS1JWVE1UU1VOTjJVNlZETEdWTFdTU0xUSkZYRUU2TENHSkpEQ1dKVEtGVVU2MktLR0pNVlFWVFRNUkJVUzQySk5WTkhHV0tYTVI1RVMyVFFHNUVXMk1MV0xKRUZNNDIyTEJHV1NUM01PTlVXRVdDV09OU0VPMjNVTEpEVTI1RERHSkhHUVlTSEtWVVVZUTJLTlpSREdXVE1NTldUSzJEQ05WSEdZVENZSUozR0VSM01OSlNWR1NMVEpGV1VNMjNFTlZESEtXSlNLWlZVWVYyU05CU0VPUkxVTU5FRVU1VEVJNUxHVVpDSE5SM0dFMkpSR0JSVzJSVFZNTVpGVTVURE5VWUdTVENESkpVRlVTQzJOQlJHMlRUTUxKQlRDMjJaTEJKR1FUQ1lJSjRXRU0yU05STVRHVVRRTUlaREk1REJHSkxES1RDWEdGVUdFM0tHTlpORk9NTE1NSlhGQzJLWUxBWVRTTFNVSU5aREVVTExPVllYRUxaV000NFcyNlNYSU5JUzYyS1VOUlVFNFRMTUtWSUdRVlNFR1VaWEVNMlRQRTNYUzJURE5JM1RDM0tJS1JFWE80VFlHUkxYVTJLWUlWU0VNVkxRS1JFVVVOTFFQRlpXNlpERklGR0dHVkpYT0ZZWEszS05NVTRFU1JDMkdGU0VDMjNETUUyR0lWUlFHTVpUUVVEWE5WTEdZWUxXSkpJREk0Q0tQQkVVU09LRUdaS1VNVENWTUZMRkEyVExLNUZISVkyRUdaWUdDM0JXTjVIV01SM09KTVpIVVVDTEpKSkcyUjJJS1laV0tXVFhPRkRHS0szUEc1VlM2NFpMSUZLRTQyQ1FMSlRWR0wyTEtaTVdPTDJMRk5XRU9VRFhKUTNXVVFUWUpFM1VPVDNCTk0zRktZTEpNRkVHNlpMTEdCSkZJM1pYR0pDRkNQSjU=",
            "version": "ff1c092b5b754ea38a7da7995fa0aa7e",
            "versionless_id": "https://dev-vault-9d01d0ac1684b3.vault.azure.net/secrets/dev1-vault-license"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "data.azurerm_key_vault.key_vault_id"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.vault-ent.module.load_balancer",
      "mode": "managed",
      "type": "azurerm_application_gateway",
      "name": "vault",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "authentication_certificate": [],
            "autoscale_configuration": [
              {
                "max_capacity": 0,
                "min_capacity": 0
              }
            ],
            "backend_address_pool": [
              {
                "fqdns": [],
                "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/backendAddressPools/dev1-vault",
                "ip_addresses": [],
                "name": "dev1-vault"
              }
            ],
            "backend_http_settings": [
              {
                "affinity_cookie_name": "",
                "authentication_certificate": [],
                "connection_draining": [],
                "cookie_based_affinity": "Disabled",
                "host_name": "vault.server.com",
                "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/backendHttpSettingsCollection/dev1-vault",
                "name": "dev1-vault",
                "path": "",
                "pick_host_name_from_backend_address": false,
                "port": 8200,
                "probe_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/probes/dev1-vault",
                "probe_name": "dev1-vault",
                "protocol": "Https",
                "request_timeout": 60,
                "trusted_root_certificate_names": [
                  "dev1-vault-backend"
                ]
              }
            ],
            "custom_error_configuration": [],
            "enable_http2": false,
            "fips_enabled": false,
            "firewall_policy_id": null,
            "force_firewall_policy_association": false,
            "frontend_ip_configuration": [
              {
                "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/frontendIPConfigurations/dev1-vault-public",
                "name": "dev1-vault-public",
                "private_ip_address": "",
                "private_ip_address_allocation": "Dynamic",
                "private_link_configuration_id": "",
                "private_link_configuration_name": "",
                "public_ip_address_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/publicIPAddresses/dev1-vault-lb-public",
                "subnet_id": ""
              },
              {
                "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/frontendIPConfigurations/dev1-vault",
                "name": "dev1-vault",
                "private_ip_address": "10.0.2.253",
                "private_ip_address_allocation": "Static",
                "private_link_configuration_id": "",
                "private_link_configuration_name": "",
                "public_ip_address_id": "",
                "subnet_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/virtualNetworks/dev-vault/subnets/dev-vault-lb"
              }
            ],
            "frontend_port": [
              {
                "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/frontendPorts/dev1-vault",
                "name": "dev1-vault",
                "port": 8200
              }
            ],
            "gateway_ip_configuration": [
              {
                "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/gatewayIPConfigurations/dev1-vault",
                "name": "dev1-vault",
                "subnet_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/virtualNetworks/dev-vault/subnets/dev-vault-lb"
              }
            ],
            "global": [],
            "http_listener": [
              {
                "custom_error_configuration": [],
                "firewall_policy_id": "",
                "frontend_ip_configuration_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/frontendIPConfigurations/dev1-vault",
                "frontend_ip_configuration_name": "dev1-vault",
                "frontend_port_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/frontendPorts/dev1-vault",
                "frontend_port_name": "dev1-vault",
                "host_name": "",
                "host_names": [],
                "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/httpListeners/dev1-vault",
                "name": "dev1-vault",
                "protocol": "Https",
                "require_sni": false,
                "ssl_certificate_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/sslCertificates/dev1-vault",
                "ssl_certificate_name": "dev1-vault",
                "ssl_profile_id": "",
                "ssl_profile_name": ""
              }
            ],
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault",
            "identity": [
              {
                "identity_ids": [
                  "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.ManagedIdentity/userAssignedIdentities/dev1-vault-lb"
                ],
                "type": "UserAssigned"
              }
            ],
            "location": "eastus",
            "name": "dev1-vault",
            "private_endpoint_connection": [],
            "private_link_configuration": [],
            "probe": [
              {
                "host": "vault.server.com",
                "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/probes/dev1-vault",
                "interval": 30,
                "match": [
                  {
                    "body": "",
                    "status_code": []
                  }
                ],
                "minimum_servers": 0,
                "name": "dev1-vault",
                "path": "/v1/sys/health?activecode=200\u0026standbycode=200\u0026sealedcode=200\u0026uninitcode=200",
                "pick_host_name_from_backend_http_settings": false,
                "port": 0,
                "protocol": "Https",
                "timeout": 3,
                "unhealthy_threshold": 3
              }
            ],
            "redirect_configuration": [],
            "request_routing_rule": [
              {
                "backend_address_pool_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/backendAddressPools/dev1-vault",
                "backend_address_pool_name": "dev1-vault",
                "backend_http_settings_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/backendHttpSettingsCollection/dev1-vault",
                "backend_http_settings_name": "dev1-vault",
                "http_listener_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/httpListeners/dev1-vault",
                "http_listener_name": "dev1-vault",
                "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/requestRoutingRules/dev1-vault",
                "name": "dev1-vault",
                "priority": 1000,
                "redirect_configuration_id": "",
                "redirect_configuration_name": "",
                "rewrite_rule_set_id": "",
                "rewrite_rule_set_name": "",
                "rule_type": "Basic",
                "url_path_map_id": "",
                "url_path_map_name": ""
              }
            ],
            "resource_group_name": "dev-vault",
            "rewrite_rule_set": [],
            "sku": [
              {
                "capacity": 0,
                "name": "Standard_v2",
                "tier": "Standard_v2"
              }
            ],
            "ssl_certificate": [
              {
                "data": "",
                "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/sslCertificates/dev1-vault",
                "key_vault_secret_id": "https://dev-vault-9d01d0ac1684b3.vault.azure.net/secrets/dev-vault-cert/4ed48c2546ae4a93a0a3552520d3f404",
                "name": "dev1-vault",
                "password": "",
                "public_cert_data": ""
              }
            ],
            "ssl_policy": [
              {
                "cipher_suites": [],
                "disabled_protocols": [],
                "min_protocol_version": "",
                "policy_name": "AppGwSslPolicy20150501",
                "policy_type": "Predefined"
              }
            ],
            "ssl_profile": [],
            "tags": null,
            "timeouts": null,
            "trusted_client_certificate": [],
            "trusted_root_certificate": [
              {
                "data": "-----BEGIN CERTIFICATE-----\r\nMIIDCTCCAfGgAwIBAgIRANl2CWSY2Iy1b5+FkPZLONIwDQYJKoZIhvcNAQELBQAw\r\nHjEcMBoGA1UEAxMTY2EudmF1bHQuc2VydmVyLmNvbTAeFw0yMjEyMDkyMDU3MjFa\r\nFw0yMzAxMDgyMDU3MjFaMB4xHDAaBgNVBAMTE2NhLnZhdWx0LnNlcnZlci5jb20w\r\nggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCzILfHb3DO9C37HAgE22bV\r\ntgyFF6nlGccV8pW2fIUn7tu3OunmcguKIjr63GtWsVSm5bvqhw+OWEFAlipETlR6\r\nfurX+621XAbbaiV6cZX3qxc2CsY9Af+z5Hy4QG0N6FHqz0Se6Bgm2EN4160DA/Ov\r\nhdZYXAQz2zSia+NgLKTdLvN7glkdfqv0u5vJXEEVJKzGiV1h5KwI/hE8/eHh0YHg\r\n1parE07yyQGXHQqv2yiHl4MoVBqri4/IjwkWnAt09mmAHALqByXjzTqGinNrfBaE\r\n9bO7a8JLikjB1PEl4Oxrp6z+5Ay8qVOQ3/z//bvzqIM9Gi4qPHVnWg7UwFpuEjDn\r\nAgMBAAGjQjBAMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MB0GA1Ud\r\nDgQWBBTx7OmVcHpA6hkvbbUjkITfgGJNiTANBgkqhkiG9w0BAQsFAAOCAQEAI+Mc\r\n4psAUOAU4Z4635wHbCe9cTm+dOcx56fTzOi20YaoEvZHrnsqDpJLjIJyv/brIbHB\r\niQ3yp1yhAZ3nOPuhGZQIEIgx/ZuyjiXtW3SHpuQis3H7FuxebM52JHUenKLzGWul\r\nzE+qdH2/GbqlHEXDKTv1IuTNCUh9oojKGqzSxbJhBbkmrhJiSV/lA7qyY8du9uVe\r\nIgdBpJrImpop8MWGuO54Mb4z/kB4aDhX0ip0R6TMaBuQNfZGFHPYMk6BCXTQU6Ij\r\nzEP2olt9gdWLqqktwDbnNoVrO/gcNffYjrEhaAOPMkhc916kVd+4WYSssX/qzgVj\r\nAjpDSZU1S0Jw18TBXA==\r\n-----END CERTIFICATE-----",
                "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/trustedRootCertificates/dev1-vault-backend",
                "key_vault_secret_id": "",
                "name": "dev1-vault-backend"
              }
            ],
            "url_path_map": [],
            "waf_configuration": [],
            "zones": [
              "1",
              "2",
              "3"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "data.azurerm_subnet.lb-subnet-id",
            "module.vault-ent.module.iam.azurerm_key_vault_access_policy.load_balancer_msi",
            "module.vault-ent.module.iam.azurerm_user_assigned_identity.load_balancer",
            "module.vault-ent.module.load_balancer.azurerm_public_ip.vault_lb"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.vault-ent.module.load_balancer",
      "mode": "managed",
      "type": "azurerm_public_ip",
      "name": "vault_lb",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_method": "Static",
            "ddos_protection_mode": "VirtualNetworkInherited",
            "ddos_protection_plan_id": null,
            "domain_name_label": null,
            "edge_zone": "",
            "fqdn": null,
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/publicIPAddresses/dev1-vault-lb-public",
            "idle_timeout_in_minutes": 4,
            "ip_address": "20.120.66.144",
            "ip_tags": {},
            "ip_version": "IPv4",
            "location": "eastus",
            "name": "dev1-vault-lb-public",
            "public_ip_prefix_id": null,
            "resource_group_name": "dev-vault",
            "reverse_fqdn": null,
            "sku": "Standard",
            "sku_tier": "Regional",
            "tags": {},
            "timeouts": null,
            "zones": [
              "1",
              "2",
              "3"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.vault-ent.module.vm",
      "mode": "managed",
      "type": "azurerm_linux_virtual_machine_scale_set",
      "name": "vault_cluster",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "additional_capabilities": [
              {
                "ultra_ssd_enabled": true
              }
            ],
            "admin_password": null,
            "admin_ssh_key": [
              {
                "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDUXERoQ6ces2QIGuUawfirtiM+CByYc7Sbhrsc5xji0xZT4XL7B96hVimetsiIfLK30VdhhXY6i7B3NFd4+r8SdLNqFMA5J0p3YJCrjmBm+dprV+aDimpDV8niHnIenOCMnQ929QPWHGb+ILGwS87XSIQIUp3mrrePT6rIYHSHWqRgTaDcV9sFGYmgGjYRCCLfHJydkvFNDEsp0uw8Ef5TUauhYW2RqCSXZvIpKeqhyxL5FXE+YlZx9kLDg7Oc16mbffx0YL4YRXCfg7RPnzV6S59h9sqasu7XsV25chcPM7GOmMDuEB2nsdTpYWcR1ui8hL9eYVgDt3Twdj0+MzeyHXRuFW7P+aHvq+cVdJw/Saa90fxPcnZYOYaST34AFBdmakkOYggSY57NWALHcujnjU5ZHdAYpGoHTsE1Y/6e4F77h9PvTmdCxveR0TSuC/J6VbvIntOUXtZhfgCzo7vqaEHX3moVkFqSpRvN+NYZ3PiRuExUM/le2h2RAgvnoEfdowqDeq7geA2WP0g52j4Wq0izzhgMiIXwIG4/l1V/RKqM4nRflWQSvYnG2f1D5b4ZqPUCnX2255gHwVeRIjUC5H/YieMiXMnyVlz8Lkc/PcYA8RN+CrGkQNxq7yamwmj39qfwF3pDmPTwL3cr2SApmmDZV6RGIXoqv1G+ooeVKQ==",
                "username": "azureuser"
              }
            ],
            "admin_username": "azureuser",
            "automatic_instance_repair": [
              {
                "enabled": false,
                "grace_period": "PT30M"
              }
            ],
            "automatic_os_upgrade_policy": [],
            "boot_diagnostics": [],
            "capacity_reservation_group_id": "",
            "computer_name_prefix": "dev1-vault",
            "custom_data": null,
            "data_disk": [],
            "disable_password_authentication": true,
            "do_not_run_extensions_on_overprovisioned_machines": false,
            "edge_zone": "",
            "encryption_at_host_enabled": false,
            "eviction_policy": "",
            "extension": [],
            "extension_operations_enabled": true,
            "extensions_time_budget": "PT1H30M",
            "gallery_application": null,
            "gallery_applications": null,
            "health_probe_id": "",
            "host_group_id": null,
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Compute/virtualMachineScaleSets/dev1-vault",
            "identity": [
              {
                "identity_ids": [
                  "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.ManagedIdentity/userAssignedIdentities/dev1-vault"
                ],
                "principal_id": "",
                "tenant_id": "",
                "type": "UserAssigned"
              }
            ],
            "instances": 5,
            "location": "eastus",
            "max_bid_price": -1,
            "name": "dev1-vault",
            "network_interface": [
              {
                "dns_servers": null,
                "enable_accelerated_networking": false,
                "enable_ip_forwarding": false,
                "ip_configuration": [
                  {
                    "application_gateway_backend_address_pool_ids": [
                      "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationGateways/dev1-vault/backendAddressPools/dev1-vault"
                    ],
                    "application_security_group_ids": [
                      "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/applicationSecurityGroups/dev-vault"
                    ],
                    "load_balancer_backend_address_pool_ids": null,
                    "load_balancer_inbound_nat_rules_ids": null,
                    "name": "dev1-vault",
                    "primary": true,
                    "public_ip_address": [],
                    "subnet_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Network/virtualNetworks/dev-vault/subnets/dev-vault",
                    "version": "IPv4"
                  }
                ],
                "name": "dev1-vault",
                "network_security_group_id": "",
                "primary": true
              }
            ],
            "os_disk": [
              {
                "caching": "ReadWrite",
                "diff_disk_settings": [],
                "disk_encryption_set_id": "",
                "disk_size_gb": 1024,
                "secure_vm_disk_encryption_set_id": "",
                "security_encryption_type": "",
                "storage_account_type": "Premium_LRS",
                "write_accelerator_enabled": false
              }
            ],
            "overprovision": false,
            "plan": [],
            "platform_fault_domain_count": 5,
            "priority": "Regular",
            "provision_vm_agent": true,
            "proximity_placement_group_id": "",
            "resource_group_name": "dev-vault",
            "rolling_upgrade_policy": [],
            "scale_in": [
              {
                "force_deletion_enabled": false,
                "rule": "Default"
              }
            ],
            "scale_in_policy": "Default",
            "secret": [],
            "secure_boot_enabled": false,
            "single_placement_group": true,
            "sku": "Standard_D2s_v3",
            "source_image_id": "",
            "source_image_reference": [
              {
                "offer": "0001-com-ubuntu-server-focal",
                "publisher": "Canonical",
                "sku": "20_04-lts-gen2",
                "version": "latest"
              }
            ],
            "spot_restore": null,
            "tags": {
              "dev1-vault": "server"
            },
            "terminate_notification": null,
            "termination_notification": null,
            "timeouts": null,
            "unique_id": "738b9869-0108-4ac8-ba1a-c1955e6ebdd2",
            "upgrade_mode": "Manual",
            "user_data": "IyEvdXNyL2Jpbi9lbnYgYmFzaA0KIyBDb3B5cmlnaHQgwqkgMjAxNC0yMDIyIEhhc2hpQ29ycCwgSW5jLg0KIw0KIyBUaGlzIFNvdXJjZSBDb2RlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHByb2plY3QsIHlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uDQojDQoNCnNldCAtZSAtbyBwaXBlZmFpbA0KDQpleHBvcnQgaW5zdGFuY2VfbmFtZT0iJChjdXJsIC1zSCBNZXRhZGF0YTp0cnVlIC0tbm9wcm94eSAnKicgJ2h0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbWV0YWRhdGEvaW5zdGFuY2UvY29tcHV0ZS9uYW1lP2FwaS12ZXJzaW9uPTIwMjAtMDktMDEmZm9ybWF0PXRleHQnKSINCmV4cG9ydCBsb2NhbF9pcHY0PSIkKGN1cmwgLXNIIE1ldGFkYXRhOnRydWUgLS1ub3Byb3h5ICcqJyAnaHR0cDovLzE2OS4yNTQuMTY5LjI1NC9tZXRhZGF0YS9pbnN0YW5jZS9uZXR3b3JrL2ludGVyZmFjZS8wL2lwdjQvaXBBZGRyZXNzLzAvcHJpdmF0ZUlwQWRkcmVzcz9hcGktdmVyc2lvbj0yMDIwLTA5LTAxJmZvcm1hdD10ZXh0JykiDQoNCiMgaW5zdGFsbCBwYWNrYWdlDQoNCmN1cmwgLWZzU0wgaHR0cHM6Ly9hcHQucmVsZWFzZXMuaGFzaGljb3JwLmNvbS9ncGcgfCBhcHQta2V5IGFkZCAtDQphcHQtYWRkLXJlcG9zaXRvcnkgImRlYiBbYXJjaD1hbWQ2NF0gaHR0cHM6Ly9hcHQucmVsZWFzZXMuaGFzaGljb3JwLmNvbSAkKGxzYl9yZWxlYXNlIC1jcykgbWFpbiINCmFwdC1nZXQgdXBkYXRlDQphcHQtZ2V0IGluc3RhbGwgLXkgcHl0aG9uMy1waXAgdmF1bHQtZW50ZXJwcmlzZT0xLjguMStlbnQNCg0KIyBpbnN0YWxsIGF6dXJlLWNsaQ0KIyB0aGUgYXp1cmUtY2xpIHBhY2thZ2UgaW4gVWJ1bnR1IHVuaXZlcnNlIHJlcG8gd291bGQgYmUgaWRlYWwsIGJ1dCBpdCBpcyBicm9rZW4gaW4gdGhlIFVidW50dSAyMC4wNCB1bml2ZXJzZSByZXBvDQojIGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2VuLXVzL2NsaS9henVyZS9pbnN0YWxsLWF6dXJlLWNsaS1saW51eD9waXZvdHM9YXB0I292ZXJ2aWV3DQojIGluc3RlYWQsIGl0IGlzIGluc3RhbGxlZCBoZXJlIHZpYSBweXBpIChieSB3YXkgb2YgdGhlIHB5dGhvbjMtcGlwIHBhY2thZ2UgaW5zdGFsbGVkIGFib3ZlKQ0KcGlwMyBpbnN0YWxsIC0tbm8td2Fybi1zY3JpcHQtbG9jYXRpb24gLS11c2VyICdhenVyZS1jbGl+PTIuMjYuMCcgJ2F6dXJlLW1nbXQtY29yZX49MS4yLjAnICdjcnlwdG9ncmFwaHl+PTMuMy4yJyAndXJsbGliM1tzZWN1cmVdfj0xLjI2LjUnICdyZXF1ZXN0c349Mi4yNS4xJw0KDQojIGNvbmZpZ3VyaW5nIEF6dXJlIENMSSBmb3IgdXNlIHdpdGggVk0gbWFuYWdlZCBpZGVudGl0eQ0Kfi8ubG9jYWwvYmluL2F6IGxvZ2luIC0taWRlbnRpdHkNCg0KZWNobyAiQ29uZmlndXJpbmcgc3lzdGVtIHRpbWUiDQp0aW1lZGF0ZWN0bCBzZXQtdGltZXpvbmUgVVRDDQoNCiMgcmVtb3ZpbmcgYW55IGRlZmF1bHQgaW5zdGFsbGF0aW9uIGZpbGVzIGZyb20gL29wdC92YXVsdC90bHMvDQpybSAtcmYgL29wdC92YXVsdC90bHMvKg0KDQojIC9vcHQvdmF1bHQvdGxzIHNob3VsZCBiZSByZWFkYWJsZSBieSBhbGwgdXNlcnMgb2YgdGhlIHN5c3RlbQ0KY2htb2QgMDc1NSAvb3B0L3ZhdWx0L3Rscw0KDQojIHZhdWx0LWtleS5wZW0gc2hvdWxkIGJlIHJlYWRhYmxlIGJ5IHRoZSB2YXVsdCBncm91cCBvbmx5DQp0b3VjaCAvb3B0L3ZhdWx0L3Rscy92YXVsdC1rZXkucGVtDQpjaG93biByb290OnZhdWx0IC9vcHQvdmF1bHQvdGxzL3ZhdWx0LWtleS5wZW0NCmNobW9kIDA2NDAgL29wdC92YXVsdC90bHMvdmF1bHQta2V5LnBlbQ0KDQpzZWNyZXRfcmVzdWx0PSQofi8ubG9jYWwvYmluL2F6IGtleXZhdWx0IHNlY3JldCBzaG93IC0taWQgImh0dHBzOi8vZGV2LXZhdWx0LTlkMDFkMGFjMTY4NGIzLnZhdWx0LmF6dXJlLm5ldC9zZWNyZXRzL2Rldi12YXVsdC12bS10bHMvMTYxZTNhNjUwZGViNDdmZmExNWFkMTdjZDU2NDJjMDAiIC0tcXVlcnkgInZhbHVlIiAtLW91dHB1dCB0c3YpDQoNCmVjaG8gJHNlY3JldF9yZXN1bHQgfCBiYXNlNjQgLWQgfCBvcGVuc3NsIHBrY3MxMiAtY2xjZXJ0cyAtbm9rZXlzIC1wYXNzaW4gcGFzczogfCBvcGVuc3NsIHg1MDkgLW91dCAvb3B0L3ZhdWx0L3Rscy92YXVsdC1jZXJ0LnBlbQ0KDQplY2hvICRzZWNyZXRfcmVzdWx0IHwgYmFzZTY0IC1kIHwgb3BlbnNzbCBwa2NzMTIgLWNhY2VydHMgLW5va2V5cyAtY2hhaW4gLXBhc3NpbiBwYXNzOiB8IG9wZW5zc2wgeDUwOSAtb3V0IC9vcHQvdmF1bHQvdGxzL3ZhdWx0LWNhLnBlbQ0KDQplY2hvICRzZWNyZXRfcmVzdWx0IHwgYmFzZTY0IC1kIHwgb3BlbnNzbCBwa2NzMTIgLW5vY2VydHMgLW5vZGVzIC1wYXNzaW4gcGFzczogfCBvcGVuc3NsIHBrY3M4IC1ub2NyeXB0IC1vdXQgL29wdC92YXVsdC90bHMvdmF1bHQta2V5LnBlbQ0KDQp+Ly5sb2NhbC9iaW4vYXoga2V5dmF1bHQgc2VjcmV0IHNob3cgLS1pZCAiaHR0cHM6Ly9kZXYtdmF1bHQtOWQwMWQwYWMxNjg0YjMudmF1bHQuYXp1cmUubmV0L3NlY3JldHMvZGV2MS12YXVsdC1saWNlbnNlL2ZmMWMwOTJiNWI3NTRlYTM4YTdkYTc5OTVmYTBhYTdlIiAtLXF1ZXJ5ICJ2YWx1ZSIgLS1vdXRwdXQgdHN2IHwgYmFzZTY0IC1kID4gL29wdC92YXVsdC92YXVsdC5oY2xpYw0KIyB2YXVsdC5oY2xpYyBzaG91bGQgYmUgcmVhZGFibGUgYnkgdGhlIHZhdWx0IGdyb3VwIG9ubHkNCmNob3duIHJvb3Q6dmF1bHQgL29wdC92YXVsdC92YXVsdC5oY2xpYw0KY2htb2QgMDY0MCAvb3B0L3ZhdWx0L3ZhdWx0LmhjbGljDQoNCmNhdCA8PCBFT0YgPiAvZXRjL3ZhdWx0LmQvdmF1bHQuaGNsDQpkaXNhYmxlX3BlcmZvcm1hbmNlX3N0YW5kYnkgPSB0cnVlDQp1aSA9IHRydWUNCmRpc2FibGVfbWxvY2sgPSB0cnVlDQoNCnN0b3JhZ2UgInJhZnQiIHsNCiAgcGF0aCAgICA9ICIvb3B0L3ZhdWx0L2RhdGEiDQogIG5vZGVfaWQgPSAiJGluc3RhbmNlX25hbWUiDQogIHJldHJ5X2pvaW4gew0KICAgIGF1dG9fam9pbiA9ICJwcm92aWRlcj1henVyZSBzdWJzY3JpcHRpb25faWQ9ZjIzNGMyZDUtNGE2Ni00MTNmLTg5YzctYWQwZmRlMTFkODY0IHJlc291cmNlX2dyb3VwPWRldi12YXVsdCB2bV9zY2FsZV9zZXQ9ZGV2MS12YXVsdCINCiAgICBhdXRvX2pvaW5fc2NoZW1lID0gImh0dHBzIg0KICAgIGxlYWRlcl90bHNfc2VydmVybmFtZSA9ICJ2YXVsdC5zZXJ2ZXIuY29tIg0KICAgIGxlYWRlcl9jYV9jZXJ0X2ZpbGUgPSAiL29wdC92YXVsdC90bHMvdmF1bHQtY2EucGVtIg0KICAgIGxlYWRlcl9jbGllbnRfY2VydF9maWxlID0gIi9vcHQvdmF1bHQvdGxzL3ZhdWx0LWNlcnQucGVtIg0KICAgIGxlYWRlcl9jbGllbnRfa2V5X2ZpbGUgPSAiL29wdC92YXVsdC90bHMvdmF1bHQta2V5LnBlbSINCiAgfQ0KfQ0KDQpjbHVzdGVyX2FkZHIgPSAiaHR0cHM6Ly8kbG9jYWxfaXB2NDo4MjAxIg0KYXBpX2FkZHIgPSAiaHR0cHM6Ly8kbG9jYWxfaXB2NDo4MjAwIg0KDQpsaXN0ZW5lciAidGNwIiB7DQogIGFkZHJlc3MgICAgICAgICAgICA9ICIwLjAuMC4wOjgyMDAiDQogIHRsc19kaXNhYmxlICAgICAgICA9IGZhbHNlDQogIHRsc19jZXJ0X2ZpbGUgICAgICA9ICIvb3B0L3ZhdWx0L3Rscy92YXVsdC1jZXJ0LnBlbSINCiAgdGxzX2tleV9maWxlICAgICAgID0gIi9vcHQvdmF1bHQvdGxzL3ZhdWx0LWtleS5wZW0iDQogIHRsc19jbGllbnRfY2FfZmlsZSA9ICIvb3B0L3ZhdWx0L3Rscy92YXVsdC1jYS5wZW0iDQp9DQoNCnNlYWwgImF6dXJla2V5dmF1bHQiIHsNCiAgdGVuYW50X2lkID0gIjZjNjM3NTEyLWM0MTctNGU3OC05ZDYyLWI2MTI1OGU0YjYxOSINCiAgdmF1bHRfbmFtZSA9ICJkZXYtdmF1bHQtOWQwMWQwYWMxNjg0YjMiDQogIGtleV9uYW1lID0gImRldjEtdmF1bHQta2V5Ig0KfQ0KDQpsaWNlbnNlX3BhdGggPSAiL29wdC92YXVsdC92YXVsdC5oY2xpYyINCg0KRU9GDQoNCiMgdmF1bHQuaGNsIHNob3VsZCBiZSByZWFkYWJsZSBieSB0aGUgdmF1bHQgZ3JvdXAgb25seQ0KY2hvd24gcm9vdDpyb290IC9ldGMvdmF1bHQuZA0KY2hvd24gcm9vdDp2YXVsdCAvZXRjL3ZhdWx0LmQvdmF1bHQuaGNsDQpjaG1vZCA2NDAgL2V0Yy92YXVsdC5kL3ZhdWx0LmhjbA0KDQpzeXN0ZW1jdGwgZW5hYmxlIHZhdWx0DQpzeXN0ZW1jdGwgc3RhcnQgdmF1bHQNCg0KZWNobyAiU2V0dXAgVmF1bHQgcHJvZmlsZSINCmNhdCA8PEVPRiA+IC9ldGMvcHJvZmlsZS5kL3ZhdWx0LnNoDQpleHBvcnQgVkFVTFRfQUREUj0iaHR0cHM6Ly8xMjcuMC4wLjE6ODIwMCINCmV4cG9ydCBWQVVMVF9DQUNFUlQ9Ii9vcHQvdmF1bHQvdGxzL3ZhdWx0LWNhLnBlbSINCkVPRg0K",
            "vtpm_enabled": false,
            "zone_balance": true,
            "zones": [
              "1",
              "2",
              "3"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "data.azurerm_key_vault.key_vault_id",
            "data.azurerm_subnet.lb-subnet-id",
            "data.azurerm_subnet.vm-subnet-id",
            "module.vault-ent.data.azurerm_client_config.current",
            "module.vault-ent.module.iam.azurerm_key_vault_access_policy.load_balancer_msi",
            "module.vault-ent.module.iam.azurerm_key_vault_access_policy.vault_msi",
            "module.vault-ent.module.iam.azurerm_role_assignment.vault",
            "module.vault-ent.module.iam.azurerm_user_assigned_identity.load_balancer",
            "module.vault-ent.module.iam.azurerm_user_assigned_identity.vault",
            "module.vault-ent.module.kms.azurerm_key_vault_key.vault",
            "module.vault-ent.module.license_storage.azurerm_key_vault_secret.vault_license",
            "module.vault-ent.module.load_balancer.azurerm_application_gateway.vault",
            "module.vault-ent.module.load_balancer.azurerm_public_ip.vault_lb"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.vault-ent.module.vm",
      "mode": "managed",
      "type": "azurerm_virtual_machine_scale_set_extension",
      "name": "vault_health",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "auto_upgrade_minor_version": true,
            "automatic_upgrade_enabled": false,
            "failure_suppression_enabled": false,
            "force_update_tag": "",
            "id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Compute/virtualMachineScaleSets/dev1-vault/extensions/dev1-vault-health",
            "name": "dev1-vault-health",
            "protected_settings": null,
            "protected_settings_from_key_vault": [],
            "provision_after_extensions": null,
            "publisher": "Microsoft.ManagedServices",
            "settings": "{\"port\":8200,\"protocol\":\"https\",\"requestPath\":\"/v1/sys/health?activecode=200\\u0026standbycode=200\\u0026sealedcode=200\\u0026uninitcode=200\"}",
            "timeouts": null,
            "type": "ApplicationHealthLinux",
            "type_handler_version": "1.0",
            "virtual_machine_scale_set_id": "/subscriptions/f234c2d5-4a66-413f-89c7-ad0fde11d864/resourceGroups/dev-vault/providers/Microsoft.Compute/virtualMachineScaleSets/dev1-vault"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "data.azurerm_key_vault.key_vault_id",
            "data.azurerm_subnet.lb-subnet-id",
            "data.azurerm_subnet.vm-subnet-id",
            "module.vault-ent.data.azurerm_client_config.current",
            "module.vault-ent.module.iam.azurerm_key_vault_access_policy.load_balancer_msi",
            "module.vault-ent.module.iam.azurerm_key_vault_access_policy.vault_msi",
            "module.vault-ent.module.iam.azurerm_role_assignment.vault",
            "module.vault-ent.module.iam.azurerm_user_assigned_identity.load_balancer",
            "module.vault-ent.module.iam.azurerm_user_assigned_identity.vault",
            "module.vault-ent.module.kms.azurerm_key_vault_key.vault",
            "module.vault-ent.module.license_storage.azurerm_key_vault_secret.vault_license",
            "module.vault-ent.module.load_balancer.azurerm_application_gateway.vault",
            "module.vault-ent.module.load_balancer.azurerm_public_ip.vault_lb",
            "module.vault-ent.module.vm.azurerm_linux_virtual_machine_scale_set.vault_cluster"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
